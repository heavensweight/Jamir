<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OAuth Callback</title>
  <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
  <h1>Processing OAuth Callback...</h1>
  <script>
    // This function extracts the authorization code from the URL query parameters
    function getQueryParameter(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    // Initialize the Google API client
    function handleClientLoad() {
      gapi.load('client:auth2', initClient);
    }

    // Initialize Google API client with your Client ID
    function initClient() {
      const params = new URLSearchParams(window.location.search);
      const code = params.get('code');
      
      if (code) {
        // Your OAuth Client ID (from Google Cloud Console)
        const clientId = '613073681590-ks3lg73f0t0a90j1h8al2dltn206mvcd.apps.googleusercontent.com';
        
        // Initialize the OAuth client
        gapi.auth2.init({
          client_id: clientId
        }).then(() => {
          // Exchange the authorization code for an access token
          gapi.auth2.getAuthInstance().grantOfflineAccess().then(response => {
            const accessToken = response.code;
            console.log('Access Token:', accessToken);
            alert('Authentication successful!');
            // Store the access token locally (optional)
            localStorage.setItem('access_token', accessToken);
          });
        });
      } else {
        alert('No authorization code found in the URL.');
      }
    }

    // Call this function when the page loads
    handleClientLoad();
  </script>
</body>
</html>
